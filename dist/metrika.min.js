!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("metrika",["angular"],n):"object"==typeof exports?exports.metrika=n(require("angular")):t.metrika=n(t.angular)}(this,function(t){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=5)}([function(t,n,e){"use strict";var r=e(4),o=angular;n.ng=r&&r.module?r:o},function(t,n,e){"use strict";var r=e(0),o=e(2),i={id:null,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!1,trackHash:!0,ut:"noindex"},u=function(){function t(){this.counterConfigs=[]}return t.prototype.configureCounter=function(t,n){if(Array.isArray(t)||(t=[t]),n?"number"==typeof n&&n<t.length?this.defaultCounterId=t[n].id:this.defaultCounterId=n:this.defaultCounterId=t[0].id,!this.defaultCounterId)return void console.warn("You provided wrong counter id as a default:",n);for(var e,o=!1,u=0;u<t.length;u++)e=t[u],e.id?(e.id===this.defaultCounterId&&(o=!0),this.counterConfigs.push(r.ng.extend({},i,e))):console.warn("You should provide counter id to use Yandex metrika counter",e);o||console.warn("You provided wrong counter id as a default:",n)},t.prototype.$get=function(){var t=this;return["$q",function(n){return new o.Metrika(n,t.counterConfigs,t.defaultCounterId)}]},t}();n.MetrikaProvider=u},function(t,n,e){"use strict";var r=e(3),o=function(){function t(t,n,e){this.$q=t,this.counterConfigs=n,this.defaultCounterId=e,this.positionToId=n.map(function(t){return t.id})}return t.getCounterNameById=function(t){return"yaCounter"+t},t.getCounterById=function(n){return window[t.getCounterNameById(n)]},t.createCounter=function(n){window[t.getCounterNameById(n.id)]=new r.ya.Metrika(n)},t.prototype.insertMetrika=function(){var n=this,e="yandex_metrika_callbacks";window[e]=window[e]||[],window[e].push(function(){try{n.counterConfigs.map(function(n){return t.createCounter(n)})}catch(t){}});var r=document.getElementsByTagName("script")[0],o=document.createElement("script"),i=function(){r.parentNode.insertBefore(o,r)};return o.type="text/javascript",o.async=!0,o.src="https://mc.yandex.ru/metrika/watch.js","[object Opera]"==typeof window.opera?document.addEventListener("DOMContentLoaded",i,!1):i(),e},t.prototype.addFileExtension=function(t,n){this.counterIsLoaded(n).then(function(n){return n.addFileExtension(t)}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.extLink=function(t,n,e){var r=this;return void 0===n&&(n={}),this.counterIsLoaded(e).then(function(e){var o=r.getCallbackPromise(n,t);return e.extLink(t,n),o}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.file=function(t,n,e){var r=this;return void 0===n&&(n={}),this.counterIsLoaded(e).then(function(e){var o=r.getCallbackPromise(n,t);return e.file(t,n),o}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.getClientID=function(t){var n=this.getCounterByPosition(t);return n&&n.reachGoal?n.getClientID():void console.warn("Counter is still loading")},t.prototype.setUserID=function(t,n){this.counterIsLoaded(n).then(function(n){return n.setUserID(t)}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.userParams=function(t,n){this.counterIsLoaded(n).then(function(n){return n.userParams(t)}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.params=function(t,n){this.counterIsLoaded(n).then(function(n){return n.userParams(t)}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.replacePhones=function(t){this.counterIsLoaded(t).then(function(t){return t.replacePhones()}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.notBounce=function(t,n){var e=this;return void 0===t&&(t={}),this.counterIsLoaded(n).then(function(n){var r=e.getCallbackPromise(t,t);return n.notBounce(t),r}).catch(function(){return console.warn("Counter is still loading")})},t.prototype.fireEvent=function(t,n,e){var r=this;return void 0===n&&(n={}),this.counterIsLoaded(e).then(function(e){var o=r.getCallbackPromise(n,t);return e.reachGoal(t,n.params,n.callback,n.ctx),o}).catch(function(){return console.warn("'Event with type ["+t+"] can't be fired because counter is still loading'")})},t.prototype.hit=function(t,n,e){var r=this;return void 0===n&&(n={}),this.counterIsLoaded(e).then(function(e){var o=r.getCallbackPromise(n,t);return e.hit(t,n),o}).catch(function(){return console.warn("'Hit for page ["+t+"] can't be fired because counter is still loading'")})},t.prototype.getCallbackPromise=function(t,n){var e=this.$q.defer(),r=t.callback;return t.callback=function(){r&&r.call(this),e.resolve(n)},e.promise},t.prototype.counterIsLoaded=function(t){var n=this.getCounterByPosition(t);return n&&n.reachGoal&&this.$q.resolve(n),this.$q.reject(n)},t.prototype.getCounterByPosition=function(n){var e=this.getCounterIdByPosition(n);return t.getCounterById(e)},t.prototype.getCounterIdByPosition=function(t){return void 0===t?this.defaultCounterId:this.positionToId[t]},t}();n.Metrika=o},function(t,n,e){"use strict";n.ya=Ya},function(n,e){n.exports=t},function(t,n,e){"use strict";var r=e(0),o=e(1),t=r.ng.module("yandex-metrika",[]);t.provider("$metrika",o.MetrikaProvider),t.run(["$metrika",function(t){t.insertMetrika()}])}])});