{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 70aa66c56336beddb383","webpack:///./src/angular.ts","webpack:///./src/mertika.provider.ts","webpack:///./src/index.ts","webpack:///./src/mertika.service.ts","webpack:///external {\"root\":\"angular\",\"amd\":\"angular\",\"commonjs2\":\"angular\",\"commonjs\":\"angular\"}"],"names":[],"mappings":"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","file":"metrika.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"metrika\", [\"angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"metrika\"] = factory(require(\"angular\"));\n\telse\n\t\troot[\"metrika\"] = factory(root[\"angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 70aa66c56336beddb383","/**\n * @hidden\n * @module ng1\n */ /** */\ndeclare var angular;\nimport * as ng_from_import from 'angular';\nlet ng_from_global = angular;\n\n/** @internal */\nexport const ng = (ng_from_import && ng_from_import.module) ? ng_from_import : ng_from_global;\n\n\n\n// WEBPACK FOOTER //\n// ./src/angular.ts","/** @internal */\nimport { ng as angular } from './angular';\n\n/** @internal */\nimport { Metrika, YandexCounterConfig } from './mertika.service';\n\nconst DEFAULT_CONFIG = {\n  id: null,\n  clickmap: true,\n  trackLinks: true,\n  accurateTrackBounce: true,\n  webvisor: false,\n  trackHash: true,\n  ut: 'noindex'\n};\n\nexport class MetrikaProvider implements ng.IServiceProvider {\n  counterConfigs: YandexCounterConfig[] = [];\n  defaultCounterId: number | string;\n\n  configureCounter(configs: YandexCounterConfig | YandexCounterConfig[], defaultCounter?: number | string) {\n    if (!Array.isArray(configs)) {\n      configs = [configs];\n    }\n\n    if (!defaultCounter) {\n      this.defaultCounterId = configs[0].id;\n    }\n    else if (typeof defaultCounter === 'number' && defaultCounter < configs.length) {\n      this.defaultCounterId = configs[defaultCounter].id;\n    }\n    else {\n      this.defaultCounterId = defaultCounter;\n    }\n\n    if (!this.defaultCounterId) {\n      console.warn('You provided wrong counter id as a default:', defaultCounter);\n      return;\n    }\n\n    let defaultCounterExists = false;\n    let config;\n    for (let i = 0; i < configs.length; i++) {\n      config = configs[i];\n      if (!config.id) {\n        console.warn('You should provide counter id to use Yandex metrika counter', config);\n        continue;\n      }\n      if (config.id === this.defaultCounterId) {\n        defaultCounterExists = true;\n      }\n      this.counterConfigs.push(angular.extend({}, DEFAULT_CONFIG, config));\n    }\n\n    if (!defaultCounterExists) {\n      console.warn('You provided wrong counter id as a default:', defaultCounter);\n    }\n  }\n\n  $get = ['$q', ($q: ng.IQService) => new Metrika($q, this.counterConfigs, this.defaultCounterId)];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mertika.provider.ts","/** @internal */\nimport { ng as angular } from './angular';\n\n/** @internal */\nimport { MetrikaProvider } from './mertika.provider';\nimport { Metrika } from './mertika.service';\n\nconst module = angular.module('yandex-metrika', []);\nmodule.provider('$metrika', MetrikaProvider);\nmodule.run(['$metrika', ($metrika: Metrika) => {\n  $metrika.insertMetrika();\n}]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","export interface YandexCounterConfig {\n  id: string | number;\n  clickmap?: boolean;\n  trackLinks?: boolean;\n  accurateTrackBounce?: boolean;\n  webvisor?: boolean;\n  trackHash?: boolean;\n  ut?: string;\n}\n\nexport interface CallbackOptions {\n  callback?: () => any;\n  ctx?: any;\n}\n\nexport interface CommonOptions extends CallbackOptions {\n  params?: any;\n  title?: any;\n}\n\nexport interface HitOptions extends CommonOptions {\n  referer?: string;\n}\n\nexport class Metrika {\n\n  static getCounterNameById(id) {\n    return 'yaCounter' + id;\n  }\n\n  static getCounterById(id) {\n    return window[Metrika.getCounterNameById(id)];\n  }\n\n  static createCounter(config: YandexCounterConfig) {\n    window[Metrika.getCounterNameById(config.id)] = new Ya.Metrika(config);\n  }\n\n  private positionToId: any[];\n\n  constructor(public $q: ng.IQService,\n              public counterConfigs: YandexCounterConfig[],\n              public defaultCounterId: number | string) {\n    this.positionToId = counterConfigs.map(config => config.id);\n  }\n\n  insertMetrika() {\n    let name = 'yandex_metrika_callbacks';\n    window[name] = window[name] || [];\n    window[name].push(() => {\n      try {\n        this.counterConfigs.map(config => Metrika.createCounter(config));\n      } catch(e) {}\n    });\n\n    let n = document.getElementsByTagName('script')[0],\n      s = document.createElement('script'),\n      f = () => { n.parentNode.insertBefore(s, n); };\n    s.type = 'text/javascript';\n    s.async = true;\n    s.src = 'https://mc.yandex.ru/metrika/watch.js';\n\n    f();\n    return name;\n  }\n\n  addFileExtension(extensions: string | string[], counterPosition?: number) {\n    this\n      .counterIsLoaded(counterPosition)\n      .then(counter => counter.addFileExtension(extensions))\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  extLink(url: string, options: CommonOptions = {}, counterPosition?: number): ng.IPromise<any> {\n    return this\n      .counterIsLoaded(counterPosition)\n      .then(counter => {\n        let promise = this.getCallbackPromise(options, url);\n        counter.extLink(url, options);\n        return promise;\n      })\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  file(url: string, options: HitOptions = {}, counterPosition?: number): ng.IPromise<any> {\n    return this\n      .counterIsLoaded(counterPosition)\n      .then(counter => {\n        let promise = this.getCallbackPromise(options, url);\n        counter.file(url, options);\n        return promise;\n      })\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  getClientID(counterPosition?: number): string {\n    let counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      return counter.getClientID();\n    }\n    console.warn('Counter is still loading');\n  }\n\n  setUserID(userId: string, counterPosition?: number) {\n    this\n      .counterIsLoaded(counterPosition)\n      .then(counter => counter.setUserID(userId))\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  userParams(params: any, counterPosition?: number) {\n    this\n      .counterIsLoaded(counterPosition)\n      .then(counter => counter.userParams(params))\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  params(params: any, counterPosition?: number) {\n    this\n      .counterIsLoaded(counterPosition)\n      .then(counter => counter.userParams(params))\n      .catch(() => console.warn('Counter is still loading'));\n\n  }\n\n  replacePhones(counterPosition?: number) {\n    this\n      .counterIsLoaded(counterPosition)\n      .then(counter => counter.replacePhones())\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  notBounce(options: CallbackOptions = {}, counterPosition?: number): ng.IPromise<any> {\n    return this\n      .counterIsLoaded(counterPosition)\n      .then(counter => {\n        let promise = this.getCallbackPromise(options, options);\n        counter.notBounce(options);\n        return promise;\n      })\n      .catch(() => console.warn('Counter is still loading'));\n  }\n\n  fireEvent(type: string, options: CommonOptions = {}, counterPosition?: number): ng.IPromise<any> {\n    return this\n      .counterIsLoaded(counterPosition)\n      .then(counter => {\n        let promise = this.getCallbackPromise(options, type);\n        counter.reachGoal(type, options.params, options.callback, options.ctx);\n        return promise;\n      })\n      .catch(() => console.warn(`'Event with type [${type}] can\\'t be fired because counter is still loading'`));\n  }\n\n  hit(url: string, options: HitOptions = {}, counterPosition?: number): ng.IPromise<any> {\n    return this\n      .counterIsLoaded(counterPosition)\n      .then(counter => {\n        let promise = this.getCallbackPromise(options, url);\n        counter.hit(url, options);\n        return promise;\n      })\n      .catch(() => console.warn(`'Hit for page [${url}] can\\'t be fired because counter is still loading'`));\n  }\n\n  private getCallbackPromise(options, resolveWith) {\n    let defer = this.$q.defer();\n    let optionsCallback = options.callback;\n    options.callback = function() {\n      optionsCallback && optionsCallback.call(this);\n      defer.resolve(resolveWith);\n    };\n    return defer.promise;\n  }\n\n  private counterIsLoaded(counterPosition?: number): ng.IPromise<any> {\n    let counter = this.getCounterByPosition(counterPosition);\n    if (counter && counter.reachGoal) {\n      this.$q.resolve(counter);\n    }\n    return this.$q.reject(counter);\n  }\n\n  private getCounterByPosition(counterPosition?: number) {\n    let counterId = this.getCounterIdByPosition(counterPosition);\n    return Metrika.getCounterById(counterId);\n  }\n\n  private getCounterIdByPosition(counterPosition: number) {\n    return (counterPosition === undefined) ? this.defaultCounterId : this.positionToId[counterPosition];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mertika.service.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"angular\",\"amd\":\"angular\",\"commonjs2\":\"angular\",\"commonjs\":\"angular\"}\n// module id = 4\n// module chunks = 0 1"],"sourceRoot":""}